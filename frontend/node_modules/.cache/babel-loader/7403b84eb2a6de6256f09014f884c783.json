{"remainingRequest":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\src\\views\\Requests\\RequestDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\src\\views\\Requests\\RequestDetail.vue","mtime":1588744934388},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxVc2VyXFxEb2N1bWVudHNcXEpBVFUgUExDXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBMZWF2ZUFQSSBmcm9tICdAL2FwaS9sZWF2ZS5hcGkuanMnOwppbXBvcnQgTGVhdmVDb21tZW50Rm9ybSBmcm9tICdAL2NvbXBvbmVudHMvZm9ybXMvTGVhdmVDb21tZW50Rm9ybS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3JlcXVlc3QtZGV0YWlsJywKICBjb21wb25lbnRzOiB7CiAgICBMZWF2ZUNvbW1lbnRGb3JtOiBMZWF2ZUNvbW1lbnRGb3JtCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGVhdmU6IG51bGwsCiAgICAgIGVycm9yOiAnJywKICAgICAgdXNlcjoge30sCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5mZXRjaERhdGEoKS50aGVuKGZ1bmN0aW9uIChsZWF2ZSkgewogICAgICByZXR1cm4gX3RoaXMubGVhdmUgPSBsZWF2ZTsKICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gX3RoaXMuZXJyb3IgPSBlcnJvcjsKICAgIH0pOwogICAgY29uc29sZS5sb2coJ3RoaXMubGVhdmUgOj4+ICcsIHRoaXMubGVhdmUpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbW1lbnRzOiBmdW5jdGlvbiBjb21tZW50cygpIHsKICAgICAgaWYgKHRoaXMubGVhdmUuY29tbWVudHMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiB0aGlzLmxlYXZlLmNvbW1lbnRzOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gIV90aGlzMi5sb2FkaW5nOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTGVhdmVBUEkuZ2V0KF90aGlzMi4kcm91dGUucGFyYW1zLnJlcXVlc3RJRCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLnVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVVc2VyJykpOwogICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSAhX3RoaXMyLmxvYWRpbmc7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRzLmxlYXZlKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBMZWF2ZUFQSS5nZXQodGhpcy4kcm91dGUucGFyYW1zLnJlcXVlc3RJRCkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgIHJldHVybiBfdGhpczMubGVhdmUgPSByZXN1bHRzLmxlYXZlOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmVycm9yID0gZXJyb3I7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["RequestDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,QAAA,MAAA,oBAAA;AACA,OAAA,gBAAA,MAAA,yCAAA;AACA,eAAA;AAEA,EAAA,IAAA,EAAA,gBAFA;AAIA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GAJA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA;AAJA,KAAA;AAMA,GAfA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,SAAA,SAAA,GAAA,IAAA,CAAA,UAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AAAA,KAAA,WAAA,UAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AAAA,KAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,KAAA,KAAA;AACA,GApBA;AAsBA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,KAAA,KAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,KAAA,KAAA,CAAA,QAAA;AACA;AACA;AALA,GAtBA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AADA;AAAA,uBAEA,QAAA,CAAA,GAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,SAAA,CAFA;;AAAA;AAEA,gBAAA,OAFA;AAGA,gBAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AAJA,iDAKA,OAAA,CAAA,KALA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,KAPA;AASA,IAAA,QATA,sBASA;AAAA;;AACA,MAAA,QAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EACA,IADA,CACA,UAAA,OAAA;AAAA,eAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,KAAA;AAAA,OADA,WAEA,UAAA,KAAA;AAAA,eAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AAAA,OAFA;AAGA;AAbA;AA9BA,CAAA","sourcesContent":["<template>\n  <div class=\"request-detail-wrapper\">\n    <h3>Request Detail</h3>\n    <hr class=\"w-100\">\n    <div class=\"request-container card\">\n      <div class=\"card-body\">\n\n        <p class=\"card-text text-capitalize\">Duration: {{ leave.duration }}</p>\n        <p class=\"card-text text-capitalize\">Reason: {{ leave.detail }}</p>\n        <p class=\"card-text text-capitalize\">Status: {{ leave.status }}</p>\n        <p class=\"card-text text-capitalize\">Payble: {{ leave.payable }}</p>\n\n        <div class=\"card-title font-weight-bold mt-3\">Comments:</div>\n        <b-list-item v-for=\"(comment, index) in comments\" :key='index' class=\"card p-2 my-2\">\n          <p class=\"card-text\">\n            {{ comment.body }}\n          </p>\n          <small>Commented by: {{ comment.commentor.fullname }}</small>\n        </b-list-item>\n        <template v-if=\"user.position == 'HOD'\">\n          <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mt-3\">Add Comment</b-button>\n          <b-collapse id=\"collapse-1\" class=\"mt-3\">\n            <leave-comment-form :leave='leave' :user='user' v-on:success='loadData'></leave-comment-form>\n          </b-collapse>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import LeaveAPI from '@/api/leave.api.js'\n  import LeaveCommentForm from '@/components/forms/LeaveCommentForm.vue'\n  export default {\n\n    name: 'request-detail',\n\n    components: {\n      LeaveCommentForm\n    },\n\n    data() {\n      return {\n        leave: null,\n        error: '',\n        user: {},\n        loading: false\n      }\n    },\n\n    created() {\n      this.fetchData().then(leave => this.leave = leave).catch(error => this.error = error)\n      console.log('this.leave :>> ', this.leave);\n    },\n\n    computed: {\n      comments: function () {\n        if (this.leave.comments.length > 0) {\n          return this.leave.comments\n        }\n      }\n    },\n\n    methods: {\n      async fetchData() {\n        this.loading = !this.loading\n        const results = await LeaveAPI.get(this.$route.params.requestID)\n        this.user = JSON.parse(localStorage.getItem('activeUser'))\n        this.loading = !this.loading\n        return results.leave\n      },\n\n      loadData(){\n        LeaveAPI.get(this.$route.params.requestID)\n          .then( results => this.leave = results.leave)\n          .catch(error => this.error = error)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"],"sourceRoot":"src/views/Requests"}]}