{"remainingRequest":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\views\\Reports\\ReportDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\views\\Reports\\ReportDetail.vue","mtime":1588131424000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxiZWxsYVxcRG9jdW1lbnRzXFxQcm9qZWN0c1xcamF0dXBvc3RhQmFja1VwXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBSZXBvcnRzQVBJIGZyb20gJ0AvYXBpL3JlcG9ydC5hcGkuanMnOwppbXBvcnQgUmVwb3J0Q29tbWVudEZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2Zvcm1zL1JlcG9ydENvbW1lbnRGb3JtLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicmVwb3J0IiwKICBjb21wb25lbnRzOiB7CiAgICBSZXBvcnRDb21tZW50Rm9ybTogUmVwb3J0Q29tbWVudEZvcm0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXBvcnQ6IHt9LAogICAgICB1c2VyOiB7fSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoRGF0YSgpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnJlcG9ydCA6Pj4gJywgX3RoaXMucmVwb3J0KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyB1c2VyOiBmdW5jdGlvbiAoKSB7CiAgICAvLyAgIGxldCB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlVXNlcicpKQogICAgLy8gICBpZiAodXNlcikgewogICAgLy8gICAgIHJldHVybiB1c2VyCiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICBjb21tZW50czogZnVuY3Rpb24gY29tbWVudHMoKSB7CiAgICAgIGlmICh0aGlzLnJlcG9ydC5jb21tZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0LmNvbW1lbnRzOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzdWx0czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSAhX3RoaXMyLmxvYWRpbmc7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gUmVwb3J0c0FQSS5nZXQoX3RoaXMyLiRyb3V0ZS5wYXJhbXMucmVwb3J0SUQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczIucmVwb3J0ID0gcmVzdWx0cy5yZXBvcnQ7CiAgICAgICAgICAgICAgICBfdGhpczIudXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZVVzZXInKSk7CiAgICAgICAgICAgICAgICBfdGhpczIubG9hZGluZyA9ICFfdGhpczIubG9hZGluZzsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ReportDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,UAAA,MAAA,qBAAA;AACA,OAAA,iBAAA,MAAA,0CAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,QAFA;AAIA,EAAA,UAAA,EAAA;AACA,IAAA,iBAAA,EAAA;AADA,GAJA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GAdA;AAgBA,EAAA,OAhBA,qBAgBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,SAAA,EADA;;AAAA;AAEA,cAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,EAAA,KAAA,CAAA,MAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,GAnBA;AAqBA,EAAA,QAAA,EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,KAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,KAAA,MAAA,CAAA,QAAA;AACA;AACA;AAZA,GArBA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AADA;AAAA,uBAEA,UAAA,CAAA,GAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAFA;;AAAA;AAEA,gBAAA,OAFA;AAGA,gBAAA,MAAA,CAAA,MAAA,GAAA,OAAA,CAAA,MAAA;AACA,gBAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAPA;AApCA,CAAA","sourcesContent":["<template>\n  <div class=\"report-detail-wrapper\">\n    <b-overlay :show=\"!report\" rounded=\"sm\">\n      <h3 class=\"text-capitalize\">{{ report.title }}</h3>\n      <p class=\"p-0 m-0\" v-if=\"user.position === 'HOD'\">Report by: {{ report.reporter.fullname }}</p>\n      <small>{{ report.createdAt | dateFormat }}</small>\n      <hr class=\"w-100\">\n      <p class=\"card-text\">\n        {{ report.details }}\n      </p>\n      <b-list-group class=\"mt-3\" v-if=\"comments\">\n        <h5 class=\"text-capitalize\">Comments</h5>\n        <b-list-item v-for=\"(comment, index) in comments\" :key='index' class=\"card p-2 my-2\">\n          <p class=\"card-text\">\n            {{ comment.body }}\n          </p>\n          <small>Commented by: {{ comment.commentor.fullname }}</small>\n        </b-list-item>\n      </b-list-group>\n      <template v-if=\"user.position == 'HOD'\">\n        <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mt-3\">Add Comment</b-button>\n        <b-collapse id=\"collapse-1\" class=\"mt-3\">\n          <report-comment-form :report='report' :user='user' v-on:success='fetchData'></report-comment-form>\n        </b-collapse>\n      </template>\n    </b-overlay>\n  </div>\n</template>\n\n<script>\n  import ReportsAPI from '@/api/report.api.js'\n  import ReportCommentForm from '@/components/forms/ReportCommentForm.vue'\n\n  export default {\n\n    name: \"report\",\n\n    components: {\n      ReportCommentForm\n    },\n\n    data() {\n      return {\n        report:{},\n        user:{},\n        loading: false\n      }\n    },\n\n    async created() {\n        await this.fetchData()   \n      console.log('this.report :>> ', this.report);\n    },\n\n    computed: {\n      // user: function () {\n      //   let user = JSON.parse(localStorage.getItem('activeUser'))\n      //   if (user) {\n      //     return user\n      //   }\n      // },\n\n      comments: function () {\n        if (this.report.comments.length > 0) {\n          return this.report.comments\n        }\n      }\n    },\n\n    methods: {\n      async fetchData() {\n        this.loading = !this.loading\n        const results = await ReportsAPI.get(this.$route.params.reportID)\n        this.report = results.report\n        this.user = JSON.parse(localStorage.getItem('activeUser'))\n        this.loading = !this.loading\n      }\n    }\n\n  }\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/views/Reports"}]}