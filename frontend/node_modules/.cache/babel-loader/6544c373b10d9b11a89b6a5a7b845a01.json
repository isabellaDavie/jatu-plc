{"remainingRequest":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\JATU PLC\\frontend\\src\\components\\forms\\PasswordResetForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\src\\components\\forms\\PasswordResetForm.vue","mtime":1588543442187},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\JATU PLC\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxVc2VyXFxEb2N1bWVudHNcXEpBVFUgUExDXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBVc2Vyc0FQSSBmcm9tICdAL2FwaS91c2Vycy5hcGkuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Bhc3N3b3JkLXJlc2V0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGVycm9yOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICBwYXNzd29yZDI6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1c2VyLCBkYXRhLCByZXN1bHRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSAhX3RoaXMubG9hZGluZzsKICAgICAgICAgICAgICAgIHVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVVc2VyJykpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7CgogICAgICAgICAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF90aGlzLiRyb3V0ZXIucHVzaCgnbG9naW4nKSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzLnBhc3N3b3JkICE9IF90aGlzLnBhc3N3b3JkMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9ICdQYXNzd29yZHMgZG8gbm90IG1hdGNoJzsKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSAhX3RoaXMubG9hZGluZzsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF90aGlzLnJlc2V0KCkpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzQVBJLnJlc2V0UGFzc3dvcmQodXNlci5faWQsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgcmVzdWx0cyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2UgZnJvbSBzZXJ2ZXIgOj4+JywgcmVzdWx0cyk7CgogICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRzLnVzZXIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSByZXN1bHRzLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSAhX3RoaXMubG9hZGluZzsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWN0aXZlVXNlcicpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlVXNlcicsIEpTT04uc3RyaW5naWZ5KHJlc3VsdHMudXNlcikpOwogICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gIV90aGlzLmxvYWRpbmc7CgogICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnaG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLnBhc3N3b3JkID0gJycsIHRoaXMucGFzc3dvcmQyID0gJyc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["PasswordResetForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAA,QAAA,MAAA,oBAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,gBAFA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA;AAJA,KAAA;AAMA,GAXA;AAaA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,gBAAA,IAFA,GAEA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAFA;AAGA,gBAAA,OAAA,CAAA,GAAA,CAAA,IAAA;;AAHA,oBAIA,IAJA;AAAA;AAAA;AAAA;;AAAA,iDAKA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,CALA;;AAAA;AAAA,sBAOA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,SAPA;AAAA;AAAA;AAAA;;AAQA,gBAAA,KAAA,CAAA,KAAA,GAAA,wBAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AATA,iDAUA,KAAA,CAAA,KAAA,EAVA;;AAAA;AAYA,gBAAA,IAZA,GAYA;AACA,kBAAA,QAAA,EAAA,KAAA,CAAA;AADA,iBAZA;AAAA;AAAA,uBAeA,QAAA,CAAA,aAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAfA;;AAAA;AAeA,gBAAA,OAfA;AAgBA,gBAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,EAAA,OAAA;;AACA,oBAAA,CAAA,OAAA,CAAA,IAAA,EAAA;AACA,kBAAA,KAAA,CAAA,KAAA,GAAA,OAAA,CAAA,OAAA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA;AACA,iBAJA,MAIA;AACA,kBAAA,YAAA,CAAA,UAAA,CAAA,YAAA;AAEA,kBAAA,YAAA,CAAA,OAAA,CAAA,YAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAEA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,oBAAA,IAAA,EAAA;AAAA,mBAAA;AACA;;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BA,KAjCA;AAmCA,IAAA,KAnCA,mBAmCA;AACA,WAAA,QAAA,GAAA,EAAA,EACA,KAAA,SAAA,GAAA,EADA;AAEA;AAtCA;AAbA,CAAA","sourcesContent":["<template>\r\n  <div class=\"password-reset-wrapper\">\r\n      <b-form @submit.prevent='submit'>\r\n\r\n          <b-form-group label='Password'>\r\n              <b-form-input type='password' v-model=\"password\" placeholder='Enter your new password'></b-form-input>\r\n          </b-form-group>\r\n\r\n          <b-form-group label='Confirm Password'>\r\n              <b-form-input type='password' v-model=\"password2\" placeholder='Confirm your new password'></b-form-input>\r\n          </b-form-group>\r\n\r\n          <b-button block type=\"submit\" variant=\"primary\">\r\n                <template v-if=\"loading\">\r\n                    <b-spinner small type=\"grow\"></b-spinner>\r\n                    Loading...\r\n                </template>\r\n                <template v-else>Save</template>\r\n        </b-button>\r\n\r\n      </b-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport UsersAPI from '@/api/users.api.js'\r\n\r\nexport default {\r\n\r\n    name:'password-reset',\r\n\r\n    data(){\r\n        return{\r\n            loading:false,\r\n            error:'',\r\n            password:'',\r\n            password2:''\r\n        }\r\n    },\r\n\r\n    methods:{\r\n\r\n        async submit(){\r\n            this.loading = !this.loading\r\n            let user = JSON.parse(localStorage.getItem('activeUser'))\r\n            console.log(user)\r\n            if(!user){\r\n                return this.$router.push('login')\r\n            }else{\r\n                if(this.password != this.password2){\r\n                    this.error = 'Passwords do not match'\r\n                    this.loading = !this.loading\r\n                    return this.reset()\r\n                }\r\n                let data = {\r\n                    password:this.password\r\n                }\r\n                let results = await UsersAPI.resetPassword(user._id, data)\r\n                console.log('response from server :>>', results)\r\n                if(!results.user){\r\n                    this.error = results.message\r\n                    this.loading = !this.loading\r\n                    this.reset()\r\n                }else{\r\n                    localStorage.removeItem('activeUser')\r\n\r\n                    localStorage.setItem('activeUser', JSON.stringify(results.user))\r\n\r\n                    this.loading = !this.loading\r\n                    this.reset()\r\n                    this.$router.push({ name:'home'})\r\n                }\r\n            }\r\n        },\r\n\r\n        reset(){\r\n            this.password = '',\r\n            this.password2 = ''\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"sourceRoot":"src/components/forms"}]}