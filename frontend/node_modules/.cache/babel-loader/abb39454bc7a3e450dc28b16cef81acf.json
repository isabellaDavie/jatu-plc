{"remainingRequest":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\components\\forms\\ProcessRequestLeaveForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\components\\forms\\ProcessRequestLeaveForm.vue","mtime":1587950008000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxiZWxsYVxcRG9jdW1lbnRzXFxQcm9qZWN0c1xcamF0dXBvc3RhQmFja1VwXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxVc2Vyc1xcYmVsbGFcXERvY3VtZW50c1xcUHJvamVjdHNcXGphdHVwb3N0YUJhY2tVcFxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTGVhdmVBUEkgZnJvbSAnQC9hcGkvbGVhdmUuYXBpLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9jZXNzLXJlcXVlc3QtbGVhdmUtZm9ybScsCiAgcHJvcHM6IHsKICAgIHJlcXVlc3Q6IHt9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGVhdmU6IHsKICAgICAgICBzdGF0dXM6IG51bGwsCiAgICAgICAgcGF5YWJsZTogbnVsbAogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgb3B0aW9uczogW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiAnUGxlYXNlIHNlbGVjdCBhbiBvcHRpb24nCiAgICAgIH0sICdhcHByb3ZlZCcsICdkZW5pZWQnXSwKICAgICAgb3B0aW9uc1BheTogW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiAnUGxlYXNlIHNlbGVjdCBsZWF2ZSBwYXltZW50IG1vZGUnCiAgICAgIH0sICdQYXlhYmxlJywgJ05vbi1wYXlhYmxlJ10KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coJ3RoaXMucmVxdWVzdCA6JywgdGhpcy5yZXF1ZXN0KTsKCiAgICBpZiAodGhpcy5yZXF1ZXN0KSB7CiAgICAgIHRoaXMubGVhdmUgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnJlcXVlc3QpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBhcHByb3ZlZEJ5LCBsZWF2ZSwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9ICFfdGhpcy5sb2FkaW5nOwogICAgICAgICAgICAgICAgYXBwcm92ZWRCeSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZVVzZXInKSk7CgogICAgICAgICAgICAgICAgaWYgKCFhcHByb3ZlZEJ5KSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCJZb3UgaGF2ZSB0byBiZSBsb2dnZWQgaW4iKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZWF2ZSA9IF9vYmplY3RTcHJlYWQoe30sIF90aGlzLmxlYXZlLCB7CiAgICAgICAgICAgICAgICAgIGFwcHJvdmVkQnk6IGFwcHJvdmVkQnkuX2lkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMubGVhdmUucGF5YWJsZSA9PSAnUGF5YWJsZScpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlYXZlIDonLCBsZWF2ZSk7CiAgICAgICAgICAgICAgICAgIGxlYXZlLnBheWFibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlYXZlIDonLCBsZWF2ZSk7CiAgICAgICAgICAgICAgICAgIGxlYXZlLnBheWFibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGVhdmUgOicsIGxlYXZlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIExlYXZlQVBJLnVwZGF0ZShsZWF2ZS5faWQsIGxlYXZlKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlIDonLCByZXNwb25zZSk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmxlYXZlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSAhX3RoaXMubG9hZGluZzsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdzdWNjZXNzJyk7IC8vIHJldHVybiB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIC8vICAgICBuYW1lOiAncmVxdWVzdHMnLAogICAgICAgICAgICAgICAgICAvLyB9KQoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCJGYWlsZWQgdG8gcHJvY2VzcyByZXF1ZXN0LiIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHt9CiAgfQp9Ow=="},{"version":3,"sources":["ProcessRequestLeaveForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,QAAA,MAAA,oBAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,4BAFA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GAJA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,OAAA,EAAA;AAFA,OADA;AAKA,MAAA,OAAA,EAAA,KALA;AAMA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,IAAA,EAAA;AAFA,OADA,EAKA,UALA,EAMA,QANA,CANA;AAcA,MAAA,UAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA,IAAA;AACA,QAAA,IAAA,EAAA;AADA,OADA,EAGA,SAHA,EAIA,aAJA;AAdA,KAAA;AAuBA,GAhCA;AAkCA,EAAA,OAlCA,qBAkCA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;;AACA,QAAA,KAAA,OAAA,EAAA;AACA,WAAA,KAAA,qBACA,KAAA,OADA;AAGA;AACA,GAzCA;AA2CA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,gBAAA,UAFA,GAEA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAFA;;AAGA,oBAAA,CAAA,UAAA,EAAA;AACA,kBAAA,KAAA,CAAA,0BAAA,CAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA;AADA,mBAAA;AAGA;;AACA,gBAAA,KATA,qBAUA,KAAA,CAAA,KAVA;AAWA,kBAAA,UAAA,EAAA,UAAA,CAAA;AAXA;;AAcA,oBAAA,KAAA,CAAA,KAAA,CAAA,OAAA,IAAA,SAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,KAAA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AACA,iBAHA,MAGA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,KAAA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,KAAA;AArBA;AAAA,uBAsBA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,EAAA,KAAA,CAtBA;;AAAA;AAsBA,gBAAA,QAtBA;AAuBA,gBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,QAAA;;AACA,oBAAA,QAAA,CAAA,KAAA,EAAA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA,CAAA,SAAA,EAFA,CAGA;AACA;AACA;;AAEA,iBAPA,MAOA;AACA,kBAAA,KAAA,CAAA,4BAAA,CAAA;AACA;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmCA,KArCA;AAuCA,IAAA,KAvCA,mBAuCA,CAAA;AAvCA;AA3CA,CAAA","sourcesContent":["<template>\n    <div class=\"request-leave-form-container\">\n        <b-form @submit.prevent='submit'>\n            <b-form-group label=\"Leave Duration\">\n                <b-form-input v-model='request.duration' placeholder=\"Number of days\"></b-form-input>\n            </b-form-group>\n\n            <b-form-group label=\"Leave Type\">\n               <b-form-select v-model=\"leave.payable\" :options=\"optionsPay\"></b-form-select>\n            </b-form-group>\n\n\n\n            <b-form-group label='Approval'>\n                <b-form-select v-model=\"leave.status\" :options=\"options\"></b-form-select>\n            </b-form-group>\n\n\n            <b-button block type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Save</template>\n            </b-button>\n\n            <b-button block type=\"reset\" variant=\"outline-secondary\">Reset</b-button>\n\n\n        </b-form>\n    </div>\n</template>\n\n<script>\n    import LeaveAPI from '@/api/leave.api.js'\n\n    export default {\n\n        name: 'process-request-leave-form',\n\n        props: {\n            request: {}\n        },\n\n        data() {\n            return {\n                leave: {\n                    status:null,\n                    payable:null\n                },\n                loading: false,\n                options: [\n                    {\n                        value: null,\n                        text: 'Please select an option'\n                    },\n                    'approved',\n                    'denied'\n                ],\n                optionsPay:[\n                    {value:null,\n                    text:'Please select leave payment mode'},\n                    'Payable',\n                    'Non-payable'\n\n                ],\n                \n            }\n        },\n\n        mounted() {\n            console.log('this.request :', this.request);\n            if (this.request) {\n                this.leave = {\n                    ...this.request\n                }\n            }\n        },\n\n        methods: {\n\n            async submit() {\n                this.loading = !this.loading\n                const approvedBy = JSON.parse(localStorage.getItem('activeUser'))\n                if (!approvedBy) {\n                    alert(\"You have to be logged in\")\n                    this.$router.push({\n                        name: 'login'\n                    })\n                }\n                let leave = {\n                    ...this.leave,\n                    approvedBy: approvedBy._id\n                }\n                \n                if(this.leave.payable == 'Payable'){\n                    console.log('leave :', leave);\n                    leave.payable = true\n                }else{\n                    console.log('leave :', leave);\n                    leave.payable = false\n                }\n         console.log('leave :', leave);\n                let response = await LeaveAPI.update(leave._id, leave)\n                console.log('response :', response);\n                if (response.leave) {\n                    this.loading = !this.loading\n                    this.$emit('success')\n                    // return this.$router.push({\n                    //     name: 'requests',\n                    // })\n\n                } else {\n                    alert(\"Failed to process request.\")\n                }\n\n            },\n\n            reset() {}\n        }\n\n\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"],"sourceRoot":"src/components/forms"}]}