{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\ReportCommentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\ReportCommentForm.vue","mtime":1589744646414},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxVc2VyXFxEb2N1bWVudHNcXGphdHUzXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBSZXBvcnRzQVBJIGZyb20gJ0AvYXBpL3JlcG9ydC5hcGkuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3JlcG9ydC1jb21tZW50LWZvcm0nLAogIHByb3BzOiB7CiAgICByZXBvcnQ6IG51bGwsCiAgICB1c2VyOiBudWxsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGVycm9yOiBudWxsLAogICAgICBjb21tZW50OiB7CiAgICAgICAgYm9keTogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCd0aGlzLnJlcG9ydCA6Pj4gJywgdGhpcy5yZXBvcnQpOwogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gIV90aGlzLmxvYWRpbmc7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5jb21tZW50IDo+PiAnLCBfdGhpcy5jb21tZW50KTsKICAgICAgICAgICAgICAgIF90aGlzLmNvbW1lbnQuY29tbWVudG9yID0gX3RoaXMudXNlci5faWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBSZXBvcnRzQVBJLmFkZENvbW1lbnQoX3RoaXMucmVwb3J0Ll9pZCwgX3RoaXMuY29tbWVudCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZSA6Pj4gJywgcmVzcG9uc2UpOwoKICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UucmVwb3J0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gcmVzcG9uc2UuZXJyb3IgfHwgcmVzcG9uc2UubWVzc2FnZTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gIV90aGlzLmxvYWRpbmc7CgogICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5jb21tZW50LmJvZHkgPSBudWxsOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ReportCommentForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,UAAA,MAAA,qBAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,qBAFA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA,IADA;AAEA,IAAA,IAAA,EAAA;AAFA,GAJA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA;AAHA,KAAA;AAOA,GAjBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,EAAA,KAAA,MAAA;AACA,GArBA;AAuBA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,KAAA,CAAA,OAAA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,SAAA,GAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AAHA;AAAA,uBAIA,UAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,CAAA,GAAA,EAAA,KAAA,CAAA,OAAA,CAJA;;AAAA;AAIA,gBAAA,QAJA;AAKA,gBAAA,OAAA,CAAA,GAAA,CAAA,eAAA,EAAA,QAAA;;AACA,oBAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,kBAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,KAAA,IAAA,QAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA;AACA,iBAHA,MAGA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,KAAA,CAAA,SAAA;AACA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,KAhBA;AAkBA,IAAA,KAlBA,mBAkBA;AACA,WAAA,OAAA,CAAA,IAAA,GAAA,IAAA;AACA;AApBA;AAvBA,CAAA","sourcesContent":["<template>\n  <div class=\"report-comment-form\">\n      <b-alert :show='error' variant=\"danger\" class=\"my-2\">{{ error }}</b-alert>\n      <b-form @submit.prevent='submit'>\n          <b-form-group label='Comment'>\n              <b-form-textarea placeholder='Add commment' v-model='comment.body' row=4>\n\n              </b-form-textarea>\n          </b-form-group>\n\n          <b-button  type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Save Comment</template>\n            </b-button>\n      </b-form>\n  </div>\n</template>\n\n<script>\nimport ReportsAPI from '@/api/report.api.js'\n\nexport default {\n\n    name:'report-comment-form',\n\n    props:{\n        report:null,\n        user:null\n    },\n\n    data(){\n        return{\n            loading:false,\n            error:null,\n            comment:{\n                body:null\n            }\n        }\n    },\n\n    mounted(){\n        console.log('this.report :>> ', this.report);\n    },\n\n    methods:{\n\n        async submit(){\n            this.loading = !this.loading\n            console.log('this.comment :>> ', this.comment);\n            this.comment.commentor = this.user._id\n            let response =  await ReportsAPI.addComment(this.report._id, this.comment)\n            console.log('response :>> ', response);\n            if(!response.report){\n                this.error = response.error || response.message\n                this.reset()\n            }else{\n                this.loading = !this.loading\n                this.reset()\n                this.$emit('success')\n            }\n        },\n        \n        reset(){\n            this.comment.body= null\n        }\n    }\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n\n\n</style>"],"sourceRoot":"src/components/forms"}]}