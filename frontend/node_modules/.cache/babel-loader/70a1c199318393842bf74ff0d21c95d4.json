{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\RequestLeaveForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\RequestLeaveForm.vue","mtime":1589753644947},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxVc2Vyc1xcVXNlclxcRG9jdW1lbnRzXFxqYXR1M1xcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcVXNlcnNcXFVzZXJcXERvY3VtZW50c1xcamF0dTNcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IExlYXZlQVBJIGZyb20gJ0AvYXBpL2xlYXZlLmFwaS5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncmVxdWVzdC1sZWF2ZS1mb3JtJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGVhdmU6IHsKICAgICAgICBkdXJhdGlvbjogbnVsbCwKICAgICAgICBkZXRhaWw6IG51bGwsCiAgICAgICAgcmVxdWVzdEJ5OiBudWxsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogbnVsbCwKICAgICAgc3VjY2VzczogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVxdWVzdEJ5LCBsZWF2ZSwgcmVzdWx0czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gIV90aGlzLmxvYWRpbmc7CiAgICAgICAgICAgICAgICByZXF1ZXN0QnkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVVc2VyJykpOwoKICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdEJ5KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gIllvdSBoYXZlIHRvIGJlIGxvZ2dlZCBpbiI7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGVhdmUgPSBfb2JqZWN0U3ByZWFkKHt9LCBfdGhpcy5sZWF2ZSwgewogICAgICAgICAgICAgICAgICByZXF1ZXN0Qnk6IHJlcXVlc3RCeS5faWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlYXZlIDonLCBsZWF2ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBMZWF2ZUFQSS5jcmVhdGUobGVhdmUpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHRzIDonLCByZXN1bHRzKTsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMubGVhdmUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSAnRmFpbGVkIHRvIHNlbmQgbGVhdmUgcmVxdWVzdCc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gcmVzdWx0cy5tZXNzYWdlOwoKICAgICAgICAgICAgICAgICAgX3RoaXMucmVzZXQoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSAhX3RoaXMubG9hZGluZzsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlcXVlc3RzJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9ICFfdGhpcy5sb2FkaW5nOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVxdWVzdHMnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5sZWF2ZSA9IHsKICAgICAgICBkdXJhdGlvbjogbnVsbCwKICAgICAgICBkZXRhaWw6IG51bGwsCiAgICAgICAgcmVxdWVzdEJ5OiBudWxsCiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["RequestLeaveForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,QAAA,MAAA,oBAAA;AAGA,eAAA;AAEA,EAAA,IAAA,EAAA,oBAFA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,IAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OADA;AAMA,MAAA,OAAA,EAAA,KANA;AAOA,MAAA,KAAA,EAAA,IAPA;AAQA,MAAA,OAAA,EAAA;AARA,KAAA;AAUA,GAfA;AAiBA,EAAA,OAAA,EAAA;AAEA,IAAA,MAFA,oBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,gBAAA,SAFA,GAEA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAFA;;AAGA,oBAAA,CAAA,SAAA,EAAA;AACA,kBAAA,KAAA,CAAA,KAAA,GAAA,0BAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA;AADA,mBAAA;AAGA;;AACA,gBAAA,KATA,qBAUA,KAAA,CAAA,KAVA;AAWA,kBAAA,SAAA,EAAA,SAAA,CAAA;AAXA;AAaA,gBAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,KAAA;AAbA;AAAA,uBAcA,QAAA,CAAA,MAAA,CAAA,KAAA,CAdA;;AAAA;AAcA,gBAAA,OAdA;AAeA,gBAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,OAAA;;AACA,oBAAA,CAAA,OAAA,CAAA,KAAA,EAAA;AACA,kBAAA,KAAA,CAAA,KAAA,GAAA,8BAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,OAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,kBAAA,UAAA,CAAA,YAAA;AACA,yBAAA,OAAA,CAAA,IAAA,CAAA;AACA,sBAAA,IAAA,EAAA;AADA,qBAAA;AAGA,mBAJA,EAIA,IAJA,CAAA;AAKA,kBAAA,KAAA,CAAA,OAAA,GAAA,CAAA,KAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,oBAAA,IAAA,EAAA;AADA,mBAAA;AAGA;;AA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgCA,KAlCA;AAoCA,IAAA,KApCA,mBAoCA;AACA,WAAA,KAAA,GAAA;AACA,QAAA,QAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,IAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OAAA;AAKA;AA1CA;AAjBA,CAAA","sourcesContent":["<template>\n    <div class=\"request-leave-form-container\">\n                <b-alert show variant=\"danger\" class=\"my-2\" v-if=\"error\">{{ error }}</b-alert>\n        <b-alert show variant=\"success\" class=\"my-2\" v-if=\"success\">{{ success }}</b-alert>\n        <b-form @submit.prevent='submit'>\n            <b-form-group label=\"Leave Duration\">\n                <b-form-input v-model='leave.duration' placeholder=\"Number of days\"></b-form-input>\n            </b-form-group>\n\n            <b-form-group label='Reason for leave'>\n                <b-form-textarea v-model='leave.detail' size='lg' placeholder=\"Reason for leave\"></b-form-textarea>\n            </b-form-group>\n\n            <b-button block type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Send Request</template>\n            </b-button>\n\n            <b-button block type=\"reset\" variant=\"outline-secondary\">Reset</b-button>\n\n        </b-form>\n    </div>\n</template>\n\n<script>\n    import LeaveAPI from '@/api/leave.api.js'\n\n\n    export default {\n\n        name: 'request-leave-form',\n\n        data() {\n            return {\n                leave: {\n                    duration: null,\n                    detail: null,\n                    requestBy: null\n                },\n                loading: false,\n                error:null,\n                success:null\n            }\n        },\n\n        methods: {\n\n            async submit() {\n                this.loading = !this.loading\n                const requestBy = JSON.parse(localStorage.getItem('activeUser'))\n                if (!requestBy) {\n                    this.error = \"You have to be logged in\"\n                    this.$router.push({\n                        name: 'login'\n                    })\n                }\n                let leave = {\n                    ...this.leave,\n                    requestBy: requestBy._id\n                }\n                console.log('leave :', leave);\n                const results = await LeaveAPI.create(leave)\n                console.log('results :', results);\n                if (!results.leave) {\n                    this.error = 'Failed to send leave request'\n                } else {\n                    this.success = results.message\n                    this.reset()\n                    this.loading = !this.loading\n                    setTimeout(function() {\n                        this.$router.push({\n                        name:'requests'\n                    })\n                    }, 2000);\n                    this.loading = !this.loading\n                    this.$router.push({\n                        name:'requests'\n                    })\n                }\n            },\n\n            reset() {\n                this.leave = {\n                    duration: null,\n                    detail: null,\n                    requestBy: null\n                }\n            }\n        }\n\n\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"],"sourceRoot":"src/components/forms"}]}