{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Reports\\ReportDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Reports\\ReportDetail.vue","mtime":1589744646425},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcVXNlclxcRG9jdW1lbnRzXFxqYXR1M1xcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUmVwb3J0c0FQSSBmcm9tICdAL2FwaS9yZXBvcnQuYXBpLmpzJzsKaW1wb3J0IFJlcG9ydENvbW1lbnRGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9mb3Jtcy9SZXBvcnRDb21tZW50Rm9ybS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInJlcG9ydCIsCiAgY29tcG9uZW50czogewogICAgUmVwb3J0Q29tbWVudEZvcm06IFJlcG9ydENvbW1lbnRGb3JtCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVwb3J0OiB7fSwKICAgICAgdXNlcjoge30sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuZmV0Y2hEYXRhKCkudGhlbihmdW5jdGlvbiAocmVwb3J0KSB7CiAgICAgIHJldHVybiBfdGhpcy5yZXBvcnQgPSByZXBvcnQ7CiAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgcmV0dXJuIF90aGlzLmVycm9yID0gZXJyb3I7CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21tZW50czogZnVuY3Rpb24gY29tbWVudHMoKSB7CiAgICAgIGlmICh0aGlzLnJlcG9ydC5jb21tZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0LmNvbW1lbnRzOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gIV90aGlzMi5sb2FkaW5nOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gUmVwb3J0c0FQSS5nZXQoX3RoaXMyLiRyb3V0ZS5wYXJhbXMucmVwb3J0SUQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHRzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHMuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlLnJlamVjdChyZXN1bHRzLmVycm9yKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzMi51c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlVXNlcicpKTsKICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gIV90aGlzMi5sb2FkaW5nOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0cy5yZXBvcnQpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ReportDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,OAAA,UAAA,MAAA,qBAAA;AACA,OAAA,iBAAA,MAAA,0CAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,QAFA;AAIA,EAAA,UAAA,EAAA;AACA,IAAA,iBAAA,EAAA;AADA,GAJA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAMA,GAfA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,SAAA,SAAA,GAAA,IAAA,CAAA,UAAA,MAAA;AAAA,aAAA,KAAA,CAAA,MAAA,GAAA,MAAA;AAAA,KAAA,WAAA,UAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AAAA,KAAA;AACA,GAnBA;AAqBA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,KAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,KAAA,MAAA,CAAA,QAAA;AACA;AACA;AALA,GArBA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AADA;AAAA,uBAEA,UAAA,CAAA,GAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAFA;;AAAA;AAEA,gBAAA,OAFA;;AAAA,qBAIA,OAAA,CAAA,KAJA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAKA,IAAA,OAAA,CAAA,MAAA,CAAA,OAAA,CAAA,KAAA,CALA;;AAAA;AAAA;;AAAA;AAOA,gBAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;AACA,gBAAA,MAAA,CAAA,OAAA,GAAA,CAAA,MAAA,CAAA,OAAA;AARA,iDASA,OAAA,CAAA,MATA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAXA;AA7BA,CAAA","sourcesContent":["<template>\n  <div class=\"report-detail-wrapper\">\n    <b-overlay :show=\"!report\" rounded=\"sm\">\n      <h3 class=\"text-capitalize\">{{ report.title }}</h3>\n      <p class=\"p-0 m-0\" v-if=\"user.position === 'HOD'\">Report by: {{ report.reporter.fullname }}</p>\n      <small>{{ report.createdAt | dateFormat }}</small>\n      <hr class=\"w-100\">\n      <p class=\"card-text\">\n        {{ report.details }}\n      </p>\n      <b-list-group class=\"mt-3\" v-if=\"comments\">\n        <h5 class=\"text-capitalize\">Comments</h5>\n        <b-list-item v-for=\"(comment, index) in comments\" :key='index' class=\"card p-2 my-2\">\n          <p class=\"card-text\">\n            {{ comment.body }}\n          </p>\n          <small>Commented by: {{ comment.commentor.fullname }}</small>\n        </b-list-item>\n      </b-list-group>\n      <template v-if=\"user.position == 'HOD'\">\n        <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mt-3\">Add Comment</b-button>\n        <b-collapse id=\"collapse-1\" class=\"mt-3\">\n          <report-comment-form :report='report' :user='user' v-on:success='fetchData'></report-comment-form>\n        </b-collapse>\n      </template>\n    </b-overlay>\n  </div>\n</template>\n\n<script>\n  import ReportsAPI from '@/api/report.api.js'\n  import ReportCommentForm from '@/components/forms/ReportCommentForm.vue'\n\n  export default {\n\n    name: \"report\",\n\n    components: {\n      ReportCommentForm\n    },\n\n    data() {\n      return {\n        report:{},\n        user:{},\n        loading: false,\n        error:null\n      }\n    },\n\n    created() {\n       this.fetchData().then(report => this.report = report).catch(error => this.error = error)\n    },\n\n    computed: {\n      comments: function () {\n        if (this.report.comments.length > 0) {\n          return this.report.comments\n        }\n      }\n    },\n\n    methods: {\n      async fetchData() {\n        this.loading = !this.loading\n        const results = await ReportsAPI.get(this.$route.params.reportID)\n        // this.report = results.report\n        if(results.error){\n          return await new Promise.reject(results.error)\n        }\n        this.user = JSON.parse(localStorage.getItem('activeUser'))\n        this.loading = !this.loading\n        return  results.report\n      }\n    }\n\n  }\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/views/Reports"}]}