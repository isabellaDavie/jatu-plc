{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\RequestLeaveForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\RequestLeaveForm.vue","mtime":1589753644947},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMZWF2ZUFQSSBmcm9tICdAL2FwaS9sZWF2ZS5hcGkuanMnCgoKZXhwb3J0IGRlZmF1bHQgewoKICAgIG5hbWU6ICdyZXF1ZXN0LWxlYXZlLWZvcm0nLAoKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGVhdmU6IHsKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBudWxsLAogICAgICAgICAgICAgICAgZGV0YWlsOiBudWxsLAogICAgICAgICAgICAgICAgcmVxdWVzdEJ5OiBudWxsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBlcnJvcjpudWxsLAogICAgICAgICAgICBzdWNjZXNzOm51bGwKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKCiAgICAgICAgYXN5bmMgc3VibWl0KCkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nCiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCeSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZVVzZXInKSkKICAgICAgICAgICAgaWYgKCFyZXF1ZXN0QnkpIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSAiWW91IGhhdmUgdG8gYmUgbG9nZ2VkIGluIgogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGxlYXZlID0gewogICAgICAgICAgICAgICAgLi4udGhpcy5sZWF2ZSwKICAgICAgICAgICAgICAgIHJlcXVlc3RCeTogcmVxdWVzdEJ5Ll9pZAogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsZWF2ZSA6JywgbGVhdmUpOwogICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgTGVhdmVBUEkuY3JlYXRlKGxlYXZlKQogICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0cyA6JywgcmVzdWx0cyk7CiAgICAgICAgICAgIGlmICghcmVzdWx0cy5sZWF2ZSkgewogICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICdGYWlsZWQgdG8gc2VuZCBsZWF2ZSByZXF1ZXN0JwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5zdWNjZXNzID0gcmVzdWx0cy5tZXNzYWdlCiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9ICF0aGlzLmxvYWRpbmcKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6J3JlcXVlc3RzJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gIXRoaXMubG9hZGluZwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6J3JlcXVlc3RzJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLmxlYXZlID0gewogICAgICAgICAgICAgICAgZHVyYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICBkZXRhaWw6IG51bGwsCiAgICAgICAgICAgICAgICByZXF1ZXN0Qnk6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgp9Cg=="},{"version":3,"sources":["RequestLeaveForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"RequestLeaveForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n    <div class=\"request-leave-form-container\">\n                <b-alert show variant=\"danger\" class=\"my-2\" v-if=\"error\">{{ error }}</b-alert>\n        <b-alert show variant=\"success\" class=\"my-2\" v-if=\"success\">{{ success }}</b-alert>\n        <b-form @submit.prevent='submit'>\n            <b-form-group label=\"Leave Duration\">\n                <b-form-input v-model='leave.duration' placeholder=\"Number of days\"></b-form-input>\n            </b-form-group>\n\n            <b-form-group label='Reason for leave'>\n                <b-form-textarea v-model='leave.detail' size='lg' placeholder=\"Reason for leave\"></b-form-textarea>\n            </b-form-group>\n\n            <b-button block type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Send Request</template>\n            </b-button>\n\n            <b-button block type=\"reset\" variant=\"outline-secondary\">Reset</b-button>\n\n        </b-form>\n    </div>\n</template>\n\n<script>\n    import LeaveAPI from '@/api/leave.api.js'\n\n\n    export default {\n\n        name: 'request-leave-form',\n\n        data() {\n            return {\n                leave: {\n                    duration: null,\n                    detail: null,\n                    requestBy: null\n                },\n                loading: false,\n                error:null,\n                success:null\n            }\n        },\n\n        methods: {\n\n            async submit() {\n                this.loading = !this.loading\n                const requestBy = JSON.parse(localStorage.getItem('activeUser'))\n                if (!requestBy) {\n                    this.error = \"You have to be logged in\"\n                    this.$router.push({\n                        name: 'login'\n                    })\n                }\n                let leave = {\n                    ...this.leave,\n                    requestBy: requestBy._id\n                }\n                console.log('leave :', leave);\n                const results = await LeaveAPI.create(leave)\n                console.log('results :', results);\n                if (!results.leave) {\n                    this.error = 'Failed to send leave request'\n                } else {\n                    this.success = results.message\n                    this.reset()\n                    this.loading = !this.loading\n                    setTimeout(function() {\n                        this.$router.push({\n                        name:'requests'\n                    })\n                    }, 2000);\n                    this.loading = !this.loading\n                    this.$router.push({\n                        name:'requests'\n                    })\n                }\n            },\n\n            reset() {\n                this.leave = {\n                    duration: null,\n                    detail: null,\n                    requestBy: null\n                }\n            }\n        }\n\n\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"]}]}