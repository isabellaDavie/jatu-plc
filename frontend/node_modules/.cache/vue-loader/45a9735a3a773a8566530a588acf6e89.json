{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\tables\\RequestLeaveTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\tables\\RequestLeaveTable.vue","mtime":1589744646420},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcm9jZXNzUmVxdWVzdExlYXZlRm9ybSBmcm9tICcuLi9mb3Jtcy9Qcm9jZXNzUmVxdWVzdExlYXZlRm9ybScKaW1wb3J0IExlYXZlQ29tbWVudEZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2Zvcm1zL0xlYXZlQ29tbWVudEZvcm0udnVlJwoKZXhwb3J0IGRlZmF1bHQgewoKICAgIG5hbWU6ICdyZXF1ZXN0LWxlYXZlLXRhYmxlJywKCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgUHJvY2Vzc1JlcXVlc3RMZWF2ZUZvcm0sCiAgICAgICAgTGVhdmVDb21tZW50Rm9ybQogICAgfSwKCiAgICBwcm9wczogewogICAgICAgIHJlcXVlc3RzOiB7fQogICAgfSwKCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CgogICAgICAgICAgICB1c2VyOiB7fSwKCiAgICAgICAgICAgIGZpZWxkczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTogJ3JlcXVlc3RCeScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdSZXF1ZXN0ZWQgQnknLAogICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb246ICdkZXNjJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBrZXk6J3JlcXVlc3RCeS5kZXBhcnRtZW50JywKICAgICAgICAgICAgICAgICAgICBsYWJlbDonRGVwYXJ0bWVudCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OiAnZGV0YWlsJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0RldGFpbHMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTogJ3BheWFibGUnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUGF5YWJsZScKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAga2V5OiAnZHVyYXRpb24nLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRHVyYXRpb24nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTogJ3N0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdTdGF0dXMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGtleTogJ2FjdGlvbnMnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQWN0aW9ucycKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgLy8gdG90YWxSb3dzOiAxLAogICAgICAgICAgICAvLyBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgLy8gcGVyUGFnZTogNSwKICAgICAgICAgICAgLy8gcGFnZU9wdGlvbnM6IFs1LCAxMCwgMTVdLAogICAgICAgICAgICAvLyBzb3J0Qnk6ICcnLAogICAgICAgICAgICAvLyBzb3J0RGVzYzogZmFsc2UsCiAgICAgICAgICAgIC8vIHNvcnREaXJlY3Rpb246ICdhc2MnLAogICAgICAgICAgICBmaWx0ZXI6IG51bGwsCiAgICAgICAgICAgIGZpbHRlck9uOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBzb3J0T3B0aW9ucygpIHsKICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIG9wdGlvbnMgbGlzdCBmcm9tIG91ciBmaWVsZHMKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzCiAgICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5zb3J0YWJsZSkKICAgICAgICAgICAgICAgIC5tYXAoZiA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZi5sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGYua2V5CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9LAoKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy51c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlVXNlcicpKQogICAgfSwKCiAgICBtb3VudGVkKCkgewogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnJlcXVlc3RzIDonLCB0aGlzLnJlcXVlc3RzKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25GaWx0ZXJlZChmaWx0ZXJlZEl0ZW1zKSB7CiAgICAgICAgICAgIC8vIFRyaWdnZXIgcGFnaW5hdGlvbiB0byB1cGRhdGUgdGhlIG51bWJlciBvZiBidXR0b25zL3BhZ2VzIGR1ZSB0byBmaWx0ZXJpbmcKICAgICAgICAgICAgdGhpcy50b3RhbFJvd3MgPSBmaWx0ZXJlZEl0ZW1zLmxlbmd0aAogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMQogICAgICAgIH0sCgogICAgICAgIGZldGNoRGF0YSgpIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3VjY2VzcycpCiAgICAgICAgfSwKCiAgICAgICAgdmlld1JlcXVlc3QocmVxdWVzdElEKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0SUQgOj4+ICcsIHJlcXVlc3RJRCk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICdyZXF1ZXN0LWRldGFpbCcsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SUQ6IHJlcXVlc3RJRAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["RequestLeaveTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RequestLeaveTable.vue","sourceRoot":"src/components/tables","sourcesContent":["<template>\n    <b-container fluid>\n        <!-- User Interface controls -->\n        <!-- <div class=\"requests-table-filter-wrapper\">\n\n            <div class=\"table-filter-item d-flex justify-content-between\">\n                <b-form-group label-size=\"sm\" label-for=\"filterInput\" class=\"mb-0\">\n                    <b-input-group size=\"sm\">\n                        <b-form-input v-model=\"filter\" type=\"search\" id=\"filterInput\" placeholder=\"Search\">\n                        </b-form-input>\n                        <b-input-group-append>\n                            <b-button :disabled=\"!filter\" @click=\"filter = ''\">Clear</b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </b-form-group>\n            </div>\n        </div>\n        <hr class=\"w-100\"> -->\n\n\n        <!-- Main table element -->\n        <b-table id=\"requests-table\" show-empty small stacked=\"md\" :items=\"requests\" :fields=\"fields\" :filter=\"filter\"\n            :filterIncludedFields=\"filterOn\" @filtered=\"onFiltered\">\n\n            <template v-slot:cell(requestBy)=\"row\">\n                {{ row.value.name.first }} {{ row.value.name.middle }} {{ row.value.name.last  }}\n            </template>\n\n            <template v-slot:cell(department)=\"row\">\n                {{ row.value.department }}\n            </template>\n\n            <!-- <template v-slot:cell(approvedBy)=\"row\">\n                {{ row.value.name.first }} {{ row.value.name.last }} \n            </template> -->\n\n\n            <template v-slot:cell(actions)=\"row\">\n                <b-button size=\"sm\" @click=\"row.toggleDetails\">\n                    {{ row.detailsShowing ? 'Hide' : 'Show' }} Details\n                </b-button>\n            </template>\n\n            <template v-slot:row-details=\"row\">\n                <b-card>\n                    <h3 class=\"card-title\">Leave Request by {{ row.item.requestBy.name.first }}</h3>\n                    <div class=\"card-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <p class=\"card-text text-capitalize\">Duration: {{ row.item.duration }}</p>\n                                <p class=\"card-text text-capitalize\">Reason: {{ row.item.detail }}</p>\n                                 <!-- <p>{{ row.item._id }}</p>  -->\n                                <template v-if=\"user.position == 'HOD'\">\n                                    <b-button-toolbar>\n                                          <!-- <b-button variant='info'  @click=\"viewRequest(row.item._id)\">View </b-button>   -->\n                                    <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mr-2 \">Add Comment\n                                    </b-button>\n                                    </b-button-toolbar>\n                                    <b-collapse id=\"collapse-1\" class=\"mt-3\">\n                                        <leave-comment-form :leave='row.item' :user='user' v-on:success='fetchData'>\n                                        </leave-comment-form>\n                                    </b-collapse>\n                                </template>\n                                 <template v-else>\n                                     <b-button variant='secondary'  @click=\"viewRequest(row.item._id)\">View </b-button> \n                                </template> \n                            </div>\n                            <div class=\"col-md-6\" v-if=\"row.item.status == 'pending'\">\n                                <template v-if=\"user.position == 'HOD'\">\n                                    <process-request-leave-form :request='row.item' v-on:success='fetchData'>\n                                    </process-request-leave-form>\n                                </template>\n                            </div>\n                        </div>\n                    </div>\n                </b-card>\n            </template>\n        </b-table>\n\n        <!-- Info modal -->\n\n    </b-container>\n</template>\n\n<script>\n    import ProcessRequestLeaveForm from '../forms/ProcessRequestLeaveForm'\n    import LeaveCommentForm from '@/components/forms/LeaveCommentForm.vue'\n\n    export default {\n\n        name: 'request-leave-table',\n\n        components: {\n            ProcessRequestLeaveForm,\n            LeaveCommentForm\n        },\n\n        props: {\n            requests: {}\n        },\n\n        data() {\n            return {\n\n                user: {},\n\n                fields: [\n                    {\n                        key: 'requestBy',\n                        label: 'Requested By',\n                        sortable: true,\n                        sortDirection: 'desc'\n                    },\n                    {\n                        key:'requestBy.department',\n                        label:'Department'\n                    },\n                    {\n                        key: 'detail',\n                        label: 'Details'\n                    },\n                    {\n                        key: 'payable',\n                        label: 'Payable'\n                    },\n                    {\n                        key: 'duration',\n                        label: 'Duration'\n                    },\n                    {\n                        key: 'status',\n                        label: 'Status'\n                    },\n                    {\n                        key: 'actions',\n                        label: 'Actions'\n                    }\n                ],\n                // totalRows: 1,\n                // currentPage: 1,\n                // perPage: 5,\n                // pageOptions: [5, 10, 15],\n                // sortBy: '',\n                // sortDesc: false,\n                // sortDirection: 'asc',\n                filter: null,\n                filterOn: [],\n            }\n        },\n        computed: {\n            sortOptions() {\n                // Create an options list from our fields\n                return this.fields\n                    .filter(f => f.sortable)\n                    .map(f => {\n                        return {\n                            text: f.label,\n                            value: f.key\n                        }\n                    })\n            }\n        },\n\n        created() {\n            this.user = JSON.parse(localStorage.getItem('activeUser'))\n        },\n\n        mounted() {\n            console.log('this.requests :', this.requests);\n        },\n        methods: {\n            onFiltered(filteredItems) {\n                // Trigger pagination to update the number of buttons/pages due to filtering\n                this.totalRows = filteredItems.length\n                this.currentPage = 1\n            },\n\n            fetchData() {\n                this.$emit('success')\n            },\n\n            viewRequest(requestID) {\n                console.log('requestID :>> ', requestID);\n                this.$router.push({\n                    name: 'request-detail',\n                    params: {\n                        requestID: requestID\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]}]}