{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Reports\\ReportDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Reports\\ReportDetail.vue","mtime":1589744646425},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSZXBvcnRzQVBJIGZyb20gJ0AvYXBpL3JlcG9ydC5hcGkuanMnCmltcG9ydCBSZXBvcnRDb21tZW50Rm9ybSBmcm9tICdAL2NvbXBvbmVudHMvZm9ybXMvUmVwb3J0Q29tbWVudEZvcm0udnVlJwoKZXhwb3J0IGRlZmF1bHQgewoKICBuYW1lOiAicmVwb3J0IiwKCiAgY29tcG9uZW50czogewogICAgUmVwb3J0Q29tbWVudEZvcm0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVwb3J0Ont9LAogICAgICB1c2VyOnt9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3I6bnVsbAogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICAgdGhpcy5mZXRjaERhdGEoKS50aGVuKHJlcG9ydCA9PiB0aGlzLnJlcG9ydCA9IHJlcG9ydCkuY2F0Y2goZXJyb3IgPT4gdGhpcy5lcnJvciA9IGVycm9yKQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBjb21tZW50czogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5yZXBvcnQuY29tbWVudHMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiB0aGlzLnJlcG9ydC5jb21tZW50cwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nCiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBSZXBvcnRzQVBJLmdldCh0aGlzLiRyb3V0ZS5wYXJhbXMucmVwb3J0SUQpCiAgICAgIC8vIHRoaXMucmVwb3J0ID0gcmVzdWx0cy5yZXBvcnQKICAgICAgaWYocmVzdWx0cy5lcnJvcil7CiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlLnJlamVjdChyZXN1bHRzLmVycm9yKQogICAgICB9CiAgICAgIHRoaXMudXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZVVzZXInKSkKICAgICAgdGhpcy5sb2FkaW5nID0gIXRoaXMubG9hZGluZwogICAgICByZXR1cm4gIHJlc3VsdHMucmVwb3J0CiAgICB9CiAgfQoKfQo="},{"version":3,"sources":["ReportDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ReportDetail.vue","sourceRoot":"src/views/Reports","sourcesContent":["<template>\n  <div class=\"report-detail-wrapper\">\n    <b-overlay :show=\"!report\" rounded=\"sm\">\n      <h3 class=\"text-capitalize\">{{ report.title }}</h3>\n      <p class=\"p-0 m-0\" v-if=\"user.position === 'HOD'\">Report by: {{ report.reporter.fullname }}</p>\n      <small>{{ report.createdAt | dateFormat }}</small>\n      <hr class=\"w-100\">\n      <p class=\"card-text\">\n        {{ report.details }}\n      </p>\n      <b-list-group class=\"mt-3\" v-if=\"comments\">\n        <h5 class=\"text-capitalize\">Comments</h5>\n        <b-list-item v-for=\"(comment, index) in comments\" :key='index' class=\"card p-2 my-2\">\n          <p class=\"card-text\">\n            {{ comment.body }}\n          </p>\n          <small>Commented by: {{ comment.commentor.fullname }}</small>\n        </b-list-item>\n      </b-list-group>\n      <template v-if=\"user.position == 'HOD'\">\n        <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mt-3\">Add Comment</b-button>\n        <b-collapse id=\"collapse-1\" class=\"mt-3\">\n          <report-comment-form :report='report' :user='user' v-on:success='fetchData'></report-comment-form>\n        </b-collapse>\n      </template>\n    </b-overlay>\n  </div>\n</template>\n\n<script>\n  import ReportsAPI from '@/api/report.api.js'\n  import ReportCommentForm from '@/components/forms/ReportCommentForm.vue'\n\n  export default {\n\n    name: \"report\",\n\n    components: {\n      ReportCommentForm\n    },\n\n    data() {\n      return {\n        report:{},\n        user:{},\n        loading: false,\n        error:null\n      }\n    },\n\n    created() {\n       this.fetchData().then(report => this.report = report).catch(error => this.error = error)\n    },\n\n    computed: {\n      comments: function () {\n        if (this.report.comments.length > 0) {\n          return this.report.comments\n        }\n      }\n    },\n\n    methods: {\n      async fetchData() {\n        this.loading = !this.loading\n        const results = await ReportsAPI.get(this.$route.params.reportID)\n        // this.report = results.report\n        if(results.error){\n          return await new Promise.reject(results.error)\n        }\n        this.user = JSON.parse(localStorage.getItem('activeUser'))\n        this.loading = !this.loading\n        return  results.report\n      }\n    }\n\n  }\n</script>\n\n<style>\n\n</style>"]}]}