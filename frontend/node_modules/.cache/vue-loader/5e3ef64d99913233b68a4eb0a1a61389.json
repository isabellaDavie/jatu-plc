{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\ReportForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\components\\forms\\ReportForm.vue","mtime":1589744646413},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgUmVwb3J0c0FQSSBmcm9tICdAL2FwaS9yZXBvcnQuYXBpLmpzJwoKZXhwb3J0IGRlZmF1bHQgewoKICAgIG5hbWU6J3JlcG9ydC1mb3JtJywKCiAgICBwcm9wczp7CiAgICB9LAoKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGRhdGE6ewogICAgICAgICAgICAgICAgdGl0bGU6bnVsbCwKICAgICAgICAgICAgICAgIGRldGFpbHM6bnVsbCwKICAgICAgICAgICAgICAgIHN1YnRpdGxlOm51bGwsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRpbmc6ZmFsc2UKICAgICAgICB9CgogICAgfSwKCiAgICBjcmVhdGVkKCl7CiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMucmVwb3J0IDonLCB0aGlzLnJlcG9ydCk7CiAgICB9LAoKICAgIG1ldGhvZHM6ewoKICAgICAgICAgICAgYXN5bmMgc3VibWl0KCl7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nCiAgICAgICAgICAgICAgICBsZXQgcmVwb3J0ZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVVc2VyJykpCiAgICAgICAgICAgICAgICBpZighcmVwb3J0ZXIpewogICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTonbG9naW4nIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5kYXRhIDonLCB0aGlzLmRhdGEpOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7Li4udGhpcy5kYXRhLCByZXBvcnRlcjpyZXBvcnRlci5faWR9CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YSA6JywgZGF0YSk7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IFJlcG9ydHNBUEkuY3JlYXRlKGRhdGEpCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0cyA6JywgcmVzdWx0cyk7CiAgICAgICAgICAgICAgICBpZihyZXN1bHRzLnJlcG9ydCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3VjY2VzcycpCiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVNb2RhbCgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgcmVzZXQoKXsKICAgICAgICAgICAgdGhpcy5yZXBvcnQgPSBudWxsCiAgICAgICAgCiAgICAgICAgfSwKCiAgICAgICAgdG9nZ2xlTW9kYWwoKSB7CiAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgICAgdGhpcy4kcmVmc1snbXktbW9kYWwnXS50b2dnbGUoJyN0b2dnbGUtYnRuJykKICAgICAgfQogICAgfSwKCn0K"},{"version":3,"sources":["ReportForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"ReportForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n  <div class=\"report-form-wrapper\">\n      <b-button id=\"toggle-btn\" @click=\"toggleModal\">\n          <slot></slot>\n      </b-button>\n\n    <b-modal ref=\"my-modal\" hide-footer title=\"Send Report\">\n\n            <b-form @submit.prevent='submit'>\n\n                <b-form-group label='Title'>\n                    <b-form-input type='text' required v-model='data.title' placeholder='Report Title'></b-form-input>\n                </b-form-group>\n\n                <b-form-group label='Subtitle'>\n                    <b-form-input type='text' required v-model='data.subtitle' placeholder='Report Title'></b-form-input>\n                </b-form-group>\n\n                <b-form-group label='Details'>\n                    <b-form-textarea v-model='data.details' rows=10 required placeholder='Report Details'></b-form-textarea>\n                </b-form-group>\n\n                <b-button block type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Send Report</template>\n            </b-button>\n            <b-button block variant=\"outline-secondary\">Cancel</b-button>\n            </b-form>\n    </b-modal>\n\n\n  </div>\n</template>\n\n<script>\n\nimport ReportsAPI from '@/api/report.api.js'\n\nexport default {\n\n    name:'report-form',\n\n    props:{\n    },\n\n    data(){\n        return{\n            data:{\n                title:null,\n                details:null,\n                subtitle:null,\n            },\n            loading:false\n        }\n\n    },\n\n    created(){\n        console.log('this.report :', this.report);\n    },\n\n    methods:{\n\n            async submit(){\n                this.loading = !this.loading\n                let reporter = JSON.parse(localStorage.getItem('activeUser'))\n                if(!reporter){\n                   return this.$router.push({ name:'login' })\n                }\n                console.log('this.data :', this.data);\n                let data = {...this.data, reporter:reporter._id}\n                console.log('data :', data);\n                let results = await ReportsAPI.create(data)\n                console.log('results :', results);\n                if(results.report){\n                    this.$emit('success')\n                    this.toggleModal()\n                }\n        },\n\n        reset(){\n            this.report = null\n        \n        },\n\n        toggleModal() {\n        this.reset()\n        this.$refs['my-modal'].toggle('#toggle-btn')\n      }\n    },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]}]}