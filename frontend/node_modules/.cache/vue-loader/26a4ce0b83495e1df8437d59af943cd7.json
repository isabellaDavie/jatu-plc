{"remainingRequest":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\components\\forms\\ProcessRequestLeaveForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\src\\components\\forms\\ProcessRequestLeaveForm.vue","mtime":1587950008000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\bella\\Documents\\Projects\\jatupostaBackUp\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMZWF2ZUFQSSBmcm9tICdAL2FwaS9sZWF2ZS5hcGkuanMnCgpleHBvcnQgZGVmYXVsdCB7CgogICAgbmFtZTogJ3Byb2Nlc3MtcmVxdWVzdC1sZWF2ZS1mb3JtJywKCiAgICBwcm9wczogewogICAgICAgIHJlcXVlc3Q6IHt9CiAgICB9LAoKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGVhdmU6IHsKICAgICAgICAgICAgICAgIHN0YXR1czpudWxsLAogICAgICAgICAgICAgICAgcGF5YWJsZTpudWxsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1BsZWFzZSBzZWxlY3QgYW4gb3B0aW9uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICdhcHByb3ZlZCcsCiAgICAgICAgICAgICAgICAnZGVuaWVkJwogICAgICAgICAgICBdLAogICAgICAgICAgICBvcHRpb25zUGF5OlsKICAgICAgICAgICAgICAgIHt2YWx1ZTpudWxsLAogICAgICAgICAgICAgICAgdGV4dDonUGxlYXNlIHNlbGVjdCBsZWF2ZSBwYXltZW50IG1vZGUnfSwKICAgICAgICAgICAgICAgICdQYXlhYmxlJywKICAgICAgICAgICAgICAgICdOb24tcGF5YWJsZScKCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICBjb25zb2xlLmxvZygndGhpcy5yZXF1ZXN0IDonLCB0aGlzLnJlcXVlc3QpOwogICAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHsKICAgICAgICAgICAgdGhpcy5sZWF2ZSA9IHsKICAgICAgICAgICAgICAgIC4uLnRoaXMucmVxdWVzdAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CgogICAgICAgIGFzeW5jIHN1Ym1pdCgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gIXRoaXMubG9hZGluZwogICAgICAgICAgICBjb25zdCBhcHByb3ZlZEJ5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlVXNlcicpKQogICAgICAgICAgICBpZiAoIWFwcHJvdmVkQnkpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJZb3UgaGF2ZSB0byBiZSBsb2dnZWQgaW4iKQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGxlYXZlID0gewogICAgICAgICAgICAgICAgLi4udGhpcy5sZWF2ZSwKICAgICAgICAgICAgICAgIGFwcHJvdmVkQnk6IGFwcHJvdmVkQnkuX2lkCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKHRoaXMubGVhdmUucGF5YWJsZSA9PSAnUGF5YWJsZScpewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xlYXZlIDonLCBsZWF2ZSk7CiAgICAgICAgICAgICAgICBsZWF2ZS5wYXlhYmxlID0gdHJ1ZQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsZWF2ZSA6JywgbGVhdmUpOwogICAgICAgICAgICAgICAgbGVhdmUucGF5YWJsZSA9IGZhbHNlCiAgICAgICAgICAgIH0KICAgICBjb25zb2xlLmxvZygnbGVhdmUgOicsIGxlYXZlKTsKICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgTGVhdmVBUEkudXBkYXRlKGxlYXZlLl9pZCwgbGVhdmUpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZSA6JywgcmVzcG9uc2UpOwogICAgICAgICAgICBpZiAocmVzcG9uc2UubGVhdmUpIHsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9ICF0aGlzLmxvYWRpbmcKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnKQogICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIC8vICAgICBuYW1lOiAncmVxdWVzdHMnLAogICAgICAgICAgICAgICAgLy8gfSkKCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhbGVydCgiRmFpbGVkIHRvIHByb2Nlc3MgcmVxdWVzdC4iKQogICAgICAgICAgICB9CgogICAgICAgIH0sCgogICAgICAgIHJlc2V0KCkge30KICAgIH0KCgp9Cg=="},{"version":3,"sources":["ProcessRequestLeaveForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA","file":"ProcessRequestLeaveForm.vue","sourceRoot":"src/components/forms","sourcesContent":["<template>\n    <div class=\"request-leave-form-container\">\n        <b-form @submit.prevent='submit'>\n            <b-form-group label=\"Leave Duration\">\n                <b-form-input v-model='request.duration' placeholder=\"Number of days\"></b-form-input>\n            </b-form-group>\n\n            <b-form-group label=\"Leave Type\">\n               <b-form-select v-model=\"leave.payable\" :options=\"optionsPay\"></b-form-select>\n            </b-form-group>\n\n\n\n            <b-form-group label='Approval'>\n                <b-form-select v-model=\"leave.status\" :options=\"options\"></b-form-select>\n            </b-form-group>\n\n\n            <b-button block type=\"submit\" variant=\"primary\">\n                <template v-if=\"loading\">\n                    <b-spinner small type=\"grow\"></b-spinner>\n                    Loading...\n                </template>\n                <template v-else>Save</template>\n            </b-button>\n\n            <b-button block type=\"reset\" variant=\"outline-secondary\">Reset</b-button>\n\n\n        </b-form>\n    </div>\n</template>\n\n<script>\n    import LeaveAPI from '@/api/leave.api.js'\n\n    export default {\n\n        name: 'process-request-leave-form',\n\n        props: {\n            request: {}\n        },\n\n        data() {\n            return {\n                leave: {\n                    status:null,\n                    payable:null\n                },\n                loading: false,\n                options: [\n                    {\n                        value: null,\n                        text: 'Please select an option'\n                    },\n                    'approved',\n                    'denied'\n                ],\n                optionsPay:[\n                    {value:null,\n                    text:'Please select leave payment mode'},\n                    'Payable',\n                    'Non-payable'\n\n                ],\n                \n            }\n        },\n\n        mounted() {\n            console.log('this.request :', this.request);\n            if (this.request) {\n                this.leave = {\n                    ...this.request\n                }\n            }\n        },\n\n        methods: {\n\n            async submit() {\n                this.loading = !this.loading\n                const approvedBy = JSON.parse(localStorage.getItem('activeUser'))\n                if (!approvedBy) {\n                    alert(\"You have to be logged in\")\n                    this.$router.push({\n                        name: 'login'\n                    })\n                }\n                let leave = {\n                    ...this.leave,\n                    approvedBy: approvedBy._id\n                }\n                \n                if(this.leave.payable == 'Payable'){\n                    console.log('leave :', leave);\n                    leave.payable = true\n                }else{\n                    console.log('leave :', leave);\n                    leave.payable = false\n                }\n         console.log('leave :', leave);\n                let response = await LeaveAPI.update(leave._id, leave)\n                console.log('response :', response);\n                if (response.leave) {\n                    this.loading = !this.loading\n                    this.$emit('success')\n                    // return this.$router.push({\n                    //     name: 'requests',\n                    // })\n\n                } else {\n                    alert(\"Failed to process request.\")\n                }\n\n            },\n\n            reset() {}\n        }\n\n\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]}]}