{"remainingRequest":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Requests\\RequestDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\src\\views\\Requests\\RequestDetail.vue","mtime":1589744646426},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Documents\\jatu3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMZWF2ZUFQSSBmcm9tICdAL2FwaS9sZWF2ZS5hcGkuanMnCmltcG9ydCBMZWF2ZUNvbW1lbnRGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9mb3Jtcy9MZWF2ZUNvbW1lbnRGb3JtLnZ1ZScKZXhwb3J0IGRlZmF1bHQgewoKICBuYW1lOiAncmVxdWVzdC1kZXRhaWwnLAoKICBjb21wb25lbnRzOiB7CiAgICBMZWF2ZUNvbW1lbnRGb3JtCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxlYXZlOiBudWxsLAogICAgICBlcnJvcjogJycsCiAgICAgIHVzZXI6IHt9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpLnRoZW4obGVhdmUgPT4gdGhpcy5sZWF2ZSA9IGxlYXZlKS5jYXRjaChlcnJvciA9PiB0aGlzLmVycm9yID0gZXJyb3IpCiAgICBjb25zb2xlLmxvZygndGhpcy5sZWF2ZSA6Pj4gJywgdGhpcy5sZWF2ZSk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNvbW1lbnRzOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmxlYXZlLmNvbW1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5sZWF2ZS5jb21tZW50cwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nCiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBMZWF2ZUFQSS5nZXQodGhpcy4kcm91dGUucGFyYW1zLnJlcXVlc3RJRCkKICAgICAgdGhpcy51c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlVXNlcicpKQogICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nCiAgICAgIHJldHVybiByZXN1bHRzLmxlYXZlCiAgICB9LAoKICAgIGxvYWREYXRhKCl7CiAgICAgIExlYXZlQVBJLmdldCh0aGlzLiRyb3V0ZS5wYXJhbXMucmVxdWVzdElEKQogICAgICAgIC50aGVuKCByZXN1bHRzID0+IHRoaXMubGVhdmUgPSByZXN1bHRzLmxlYXZlKQogICAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLmVycm9yID0gZXJyb3IpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["RequestDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RequestDetail.vue","sourceRoot":"src/views/Requests","sourcesContent":["<template>\n  <div class=\"request-detail-wrapper\">\n    <h3>Request Detail</h3>\n    <hr class=\"w-100\">\n    <div class=\"request-container card\">\n      <div class=\"card-body\">\n\n        <p class=\"card-text text-capitalize\">Duration: {{ leave.duration }}</p>\n        <p class=\"card-text text-capitalize\">Reason: {{ leave.detail }}</p>\n        <p class=\"card-text text-capitalize\">Status: {{ leave.status }}</p>\n        <p class=\"card-text text-capitalize\">Payble: {{ leave.payable }}</p>\n\n        <div class=\"card-title font-weight-bold mt-3\">Comments:</div>\n        <b-list-item v-for=\"(comment, index) in comments\" :key='index' class=\"card p-2 my-2\">\n          <p class=\"card-text\">\n            {{ comment.body }}\n          </p>\n          <small>Commented by: {{ comment.commentor.fullname }}</small>\n        </b-list-item>\n        <template v-if=\"user.position == 'HOD'\">\n          <b-button v-b-toggle.collapse-1 variant=\"secondary\" class=\"mt-3\">Add Comment</b-button>\n          <b-collapse id=\"collapse-1\" class=\"mt-3\">\n            <leave-comment-form :leave='leave' :user='user' v-on:success='loadData'></leave-comment-form>\n          </b-collapse>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import LeaveAPI from '@/api/leave.api.js'\n  import LeaveCommentForm from '@/components/forms/LeaveCommentForm.vue'\n  export default {\n\n    name: 'request-detail',\n\n    components: {\n      LeaveCommentForm\n    },\n\n    data() {\n      return {\n        leave: null,\n        error: '',\n        user: {},\n        loading: false\n      }\n    },\n\n    created() {\n      this.fetchData().then(leave => this.leave = leave).catch(error => this.error = error)\n      console.log('this.leave :>> ', this.leave);\n    },\n\n    computed: {\n      comments: function () {\n        if (this.leave.comments.length > 0) {\n          return this.leave.comments\n        }\n      }\n    },\n\n    methods: {\n      async fetchData() {\n        this.loading = !this.loading\n        const results = await LeaveAPI.get(this.$route.params.requestID)\n        this.user = JSON.parse(localStorage.getItem('activeUser'))\n        this.loading = !this.loading\n        return results.leave\n      },\n\n      loadData(){\n        LeaveAPI.get(this.$route.params.requestID)\n          .then( results => this.leave = results.leave)\n          .catch(error => this.error = error)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]}]}